<app-navbar></app-navbar>

<div class="page-container">
  <h2>Productos</h2>

  <div *ngIf="loading" class="loader-container">
    <div class="loader"></div>
    <p>Cargando...</p>
  </div>
  
  <div *ngIf="error" class="error-alert">
    {{ error }}
  </div>

  <div class="product-grid" *ngIf="!loading && !error">
    <div class="product-card" *ngFor="let p of products" [class.out-of-stock]="p.stock === 0">
      
      <div class="out-of-stock-overlay" *ngIf="p.stock === 0">
        <span>No disponible por el momento</span>
      </div>

      <div class="card-image">
        <img [src]="p.imagen" [alt]="p.nombre" />
      </div>
      
      <div class="card-info">
        <h3>{{ p.nombre }}</h3>
        <p class="card-desc">{{ p.descripcion }}</p>
        
        <div class="card-bottom">
          <span class="card-price">${{ p.precio | number:'1.2-2' }}</span>
          
          <button class="add-to-cart-btn" 
                  (click)="addToCart(p)" 
                  [disabled]="p.stock === 0">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            <span>{{ p.stock === 0 ? 'Agotado' : 'Agregar' }}</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>